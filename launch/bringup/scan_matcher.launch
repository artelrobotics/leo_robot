<?xml version="1.0"?>
<launch>
    <arg name="robot_name"              default="$(env ROBOT_NAME)" />
    <arg name="odom_frame"              default="odom"/>
    <arg name="base_frame"              default="base_link" />
    <arg name="output"                  default="screen" />

    <node pkg="laser_scan_matcher" type="laser_scan_matcher_node" name="laser_scan_matcher_node" output="$(arg output)">
        <param name="fixed_frame"  value="$(arg robot_name)/$(arg odom_frame)"/>
        <param name="base_frame"   value="$(arg robot_name)/$(arg base_frame)"/>

        <param name="use_imu"          value="false"/>
        <param name="use_odom"         value="false"/>
        <param name="use_vel"          value="false"/>
        <param name="use_cloud_input"  value="false"/>

        <param name="publish_tf"             value="false"/>
        <param name="publish_pose"           value="false"/>
        <param name="publish_pose_stamped"   value="false"/>

        <param name="do_compute_covariance"  value="1"/>
        <param name="publish_pose_with_covariance"         value="true"/>
        <param name="publish_pose_with_covariance_stamped" value="true"/>
        
        <!-- What distance the fixed frame needs to move before updating the keyframe scan (in meters)  -->
        <param name="kf_dist_linear"      value="0.10"/> 
        <!-- What angle the fixed frame needs to move before updating the keyframe scan (in radians)    -->
        <param name="kf_dist_angular"     value="0.175"/>
        <!-- Maximum ICP cycle iterations  -->
        <param name="max_iterations"     value="10"/>

        <remap from="scan"   to="/$(arg robot_name)/scan"/> 
        <remap from="odom"   to="/$(arg robot_name)/encoder/odometry"/>
    </node>



</launch>